/*lentainform.comV8.0*/ if(!this.LentaInformJSON){ LentaInformJSON=function(){function f(n){return n<10?'0'+n:n;} Date.prototype.toJSON=function(){return this.getUTCFullYear()+'-'+ f(this.getUTCMonth()+1)+'-'+ f(this.getUTCDate())+'T'+ f(this.getUTCHours())+':'+ f(this.getUTCMinutes())+':'+ f(this.getUTCSeconds())+'Z';};var m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case'string':return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c;} c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+ (c%16).toString(16);})+'"':'"'+value+'"';case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';} if(typeof value.toJSON==='function'){return stringify(value.toJSON());} a=[];if(typeof value.length==='number'&&!(value.propertyIsEnumerable('length'))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||'null');} return'['+a.join(',')+']';} if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==='string'){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+':'+v);}}}}else{for(k in value){if(typeof k==='string'){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+':'+v);}}}} return'{'+a.join(',')+'}';}} return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==='object'){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n;}}}} return filter(k,v);} if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof filter==='function'?walk('',j):j;} throw new SyntaxError('parseJSON');}};}();} LentaInformBaseBlockN7755 = function(root_id, FX, fallback, containerId) { var root; var self = this; self.FX = FX; self.root = this.FX.document.getElementById(root_id); self.containerId = containerId; self.YG = fallback; self.page = 1; self.iteration = 1; self.adlink = ''; self.template = ''; self.id = 7755; self.blockType = 'news'; self.tickerShow = 0; self.VL = []; self.BI = {}; self.ZG = {}; self.PI = []; self.BU = []; self.DV = []; self.TI = "//ab-nb.lentainform.com/u123487/7755/"; self.IR = ""; self.WM = 0; self.PZ = {}; self.CI = ""; self.UQ = ""; self.teaserHashes = {}; self.fakeMode = 0; self.requestParams = {}; self.styles = ' @font-face { font-family: \'PFDinDisplayProRegular\'; src: url(\'//cdn.lentainform.com/fonts/pfdindisplaypro-regular-webfont.eot\'); src: url(\'//cdn.lentainform.com/fonts/pfdindisplaypro-regular-webfont.eot?#iefix\') format(\'embedded-opentype\'), url(\'//cdn.lentainform.com/fonts/pfdindisplaypro-regular-webfont.woff\') format(\'woff\'), url(\'//cdn.lentainform.com/fonts/pfdindisplaypro-regular-webfont.ttf\') format(\'truetype\'), url(\'//cdn.lentainform.com/fonts/pfdindisplaypro-regular-webfont.svg#PFDinDisplayProRegular\') format(\'svg\'); } .mgbox { padding: 0 !important; position: relative !important; text-align: center; vertical-align: top !important; margin:0 auto; border-style: solid; width: 100%; border-width: 0px; background-color: ; } div.mcimg { float: left; padding: 0px; text-align: center; width:106px; height:54px; overflow:hidden; } img.mcimg { border-style: solid; border-color:#000; border-width: 0px; width: 96px; margin-right:10px; height: 96px; } .mctitle a, .mcdesc a { color: #06256c; font-family: Times New Roman; font-size: 14px; font-weight: normal; text-decoration: none; } .mgbox .text-elements { text-align: left; } div.mctitle { margin-top: 5px; } .mgline:hover .mctitle a { text-decoration:underline; color: #ff0000; } .mgline{ background: none repeat scroll 0 0; ; width:100%; cursor: pointer; display: inline-block !important; vertical-align: top; min-width: 235px; margin-bottom: 5px; padding: 0!important; } div.mcprice { text-align: center; } div.mcprice span { font-size: 12px; font-weight: bold; font-style: normal; color: #ff0000; } div.mcprice > span { text-decoration: none; } span.mcpriceold { text-decoration: line-through !important; } '; self.templateText = '<div class="mgbox">{foreach} {if this.iteration != 1}</div>{/if}<div class="mgline"> <div class="image-with-text"> <div class="mcimg"> <a {$target} {$href} ><img class="mcimg" {$src}></a> </div> <div class="text-elements"> <div class="mctitle"><a {$target} {$href}>{$title}</a></div> </div> </div> {/foreach} </div></div>'; self.webProtocol = "http:"; self.clickTracking = ""; self.isOurRedirector = '0'; self.funcBlocks = {}; self.teaserData = {}; this.BS = function(str,limit) { if (str.length<=limit) return str; var word=new Array(); word=str.split(" "); var ret=word[0] + ' '; var test; for (i=1;i<word.length;i++){ test=ret+word[i]; if (test.length>limit) return ret+'...'; else ret+=word[i] + ' '; } return str; }; this.FM = function(str,limit){ var word=new Array(); var i; var ret=''; word=str.split(" "); for (i=0;i<word.length;i++){ if (word[i].length>limit && word[i].search(/&\w+;/)<0) ret+=word[i].substr(0,limit) + ' ' + word[i].substr(limit) + ' '; else ret+=word[i] + ' '; } return ret; }; this.QL = function(title) { title=this.FM(title,15); title=this.BS(title,65); return title; }; this.QG = function(desc) { desc=this.BS(desc,120); return desc; }; this.isArray = function(o) { return Object.prototype.toString.call(o) === '[object Array]'; }; self.fixGetElementsByClassNameHandler = function(el) { if (el.getElementsByClassName == undefined) { el.getElementsByClassName = function(cl) { var retnode = []; var myclass = new RegExp('\\b'+cl+'\\b'); var elem = this.getElementsByTagName('*'); for (var i = 0; i < elem.length; i++) { var classes = elem[i].className; if (myclass.test(classes)) retnode.push(elem[i]); } return retnode; }; } }; this.QC = function() { if (!this.YG && this.FX.document.getElementById("LentaInformPreloadN" + this.containerId)) { this.FX.document.getElementById("LentaInformPreloadN" + this.containerId).style.display = 'none'; } else if (this.YG && this.WM == 0) { this.root.innerHTML = ""; } }; this.LentaInformLoadNews = function(json){ this.QC(); if (self.fakeMode == 0) { for (var i = 0; i < self.PI.length; i++) { self[self.PI[i]](); } } if (this.isArray(json)){ if (json.length==0) { return; } var template = self.templateFunc(self, json); if (this.root && template) { if (typeof self.parseAdvertLink == 'function') { template = self.parseAdvertLink(template); } if (this.YG && this.WM == 0) { this.root.innerHTML = "" } this.root.innerHTML += this.CI + template + this.UQ; } } else { if (this.root && this.WM==0) { this.root.innerHTML=''; return; } } this.BI["page"] = this.page; this.BI['time'] = (new Date()).getTime(); this.setCookie(); var hrefs = this.root.getElementsByTagName("a"); for (var i = 0; i < hrefs.length; i++) { } this.AI(self.styles); this.WM++; if (self.fakeMode == 0) { for (var i = 0; i < self.BU.length; i++) { self[self.BU[i]](); } } else { if (typeof(self.responsiveInit) == "function") { self.responsiveInit(); } } }; this.DN = function() { var d = this.FX.document, w = this.FX, dE = 'documentElement', cH = 'clientHeight', cW = 'clientWidth', iH = 'innerHeight', iW = 'innerWidth', sH = 'scrollHeight', sW = 'scrollWidth', oH = 'offsetHeight', oW = 'offsetWidth', oL = 'offsetLeft', oT = 'offsetTop', sT = 'scrollTop', sL = 'scrollLeft'; if (w[iW]) { return {"c": w[iH], "s": w.pageYOffset}; } else if (d[dE] && d[dE][cW]) { return {"c": d[dE][cH], "s": d[dE][sT]}; } else if (d.body[cW]) { return {"c": d.body[cH], "s": d.body[sT]}; } return 0; }; this.renderItem = function(n, callbackText) { if (self.isArray(n)) { var p = self.XO(n, 'news'); if (!(p.id in self.PZ) && p.id != '') { if (typeof(p.hash) !== 'undefined' && typeof(p.id !== 'undefined')) { self.teaserHashes[p.id] = p.hash; } self.PZ[p.id] = 1; var addClasses = []; addClasses.push('teaser-' + p.id); if ('l' in p.other && null != p.other.l.match(/[\?|&]u=/)) { addClasses.push('dsp'); } var vars = [ [/\{\*.*?\*\}/, ''], [/\{\$href\}/g, 'href="' + self.KZ(p.hash) + '" data-hash="' + p.hash + '"'], [/\{\$pmc_item\}/, self.id], [/\{\$target\}/g, 'target="_blank"'], [/(class\=\"[^+]?)(mgline)([^+]?\")/, '$1$2 ' + addClasses.join(' ') + '$3'], [/\{\$source\}/g, p.source], [/\{\$src\}/g, 'width="120" height="120" src="'+ p.other["i"]+'"'], [/\{\$title\}/g, self.QL(p.title)], [/\{\$desc\}/g, self.QG(p.desc)], [/\{\$iteration\}/g, self.iteration], [/\$iteration/g, self.iteration], [/this\.iteration/g, self.iteration] ]; for (var i = 0 ; i < vars.length; i++) { callbackText = callbackText.replace(vars[i][0], vars[i][1]); } while (true) { var x = callbackText; var r = /\{if ([^\}]*?)\}(((?!\{(?:\/)?if).)*)\{\/if\}/g; callbackText = callbackText.replace(r, function(str, p1, p2) { if (eval(p1)) { return p2; } else { return ""; } }); if (x == callbackText) break; } this.iteration++; return callbackText; } else { self.PZ[p.id]++; return ""; } } }; this.generateTemplate = function(templateText) { self.templateText = templateText; self.templateFunc = function(inf, json) { var parts = /(.*)?\{foreach\}(.*)?\{\/foreach\}(.*)?/.exec(self.templateText); var template = typeof(parts[1]) != 'undefined' ? parts[1] : ''; for (var i = 0; i < json.length; i++) { template += inf.renderItem(json[i], parts[2]); } template += typeof(parts[3]) != 'undefined' ? parts[3] : ''; return template; }; return true; }; this.init = function() { if (this.root) { this.getCookie(); var cookie = this.BI["page"]; this.VL = this.root.getElementsByTagName('a'); var pagesCount = 20; if(cookie!=null&&parseInt(cookie)<pagesCount&&parseInt(cookie)>0) this.page=parseInt(cookie)+1; else if (parseInt(cookie)>pagesCount-1||parseInt(cookie)<1) this.page=1; if ((new Date()).getTime() - (this.BI['time']!=undefined ? this.BI['time'] : 0) >= 6e5) this.page = 1; if (!this.page) this.page=1; this.pageUnlim = this.page - 1; this.BI["page"] = this.page; this.setCookie(); if (!this.FX.document.cookie) { var dt = new Date(); this.page = dt.getSeconds()%pagesCount+1; } var protocol = self.FX.document.location.protocol; self.webProtocol = protocol.indexOf("http") != -1 ? protocol : "http:"; self.clickTracking = typeof(self.FX.MGClickTracking) != 'undefined' ? self.FX.MGClickTracking : ""; if (!self.generateTemplate(self.templateText)) { return; } for (var i=0; i<this.DV.length; i++) { this[this.DV[i]](); } } }; this.ZU = function(forceShow, refresh) { var script = this.FX.document.createElement('script'); script.type = 'text/javascript'; script.charset = 'utf-8'; script.src = this.TI + this.page; if (refresh) { self.requestParams.rsh = "rsh=1"; } if (this.FX.MGi != undefined) { self.requestParams.geo = 'geo=' + this.FX.MGi; } self.requestParams.pv = "pv=5"; self.requestParams.cbuster = 'cbuster=' + (this.FX.MG_CacheBuster ? this.FX.MG_CacheBuster : ((new Date().getTime()) + '' + Math.floor((Math.random() * 1000000000) + 1))); if (script.src.indexOf('?') == -1) { script.src += '?'; } else { script.src += '&'; } var params = []; for (var key in self.requestParams) { params.push(self.requestParams[key]); } params.push('ref=' + encodeURIComponent(this.FX.document.referrer)); if (self.FX.self !== self.FX.top) { params.push('iframe=1'); } script.src += params.join("&"); (this.realRoot != undefined ? this.realRoot : this.root).parentNode.appendChild(script); }; this.AI = function(style, container) { style = style.replace(/((?:^|}|,)\W*)((?:\w+)?\.(?:mc|mg)[\-\w]+)/g, "$1" + this.getMainCssSelector() + " $2"); if (style == "") return; if (!container) { var MGst = container ? container : this.FX.document.createElement('style'); MGst.className = 'LentaInformN7755'; MGst.type = 'text/css'; (this.realRoot != undefined ? this.realRoot : this.root).parentNode.appendChild(MGst); if (MGst.styleSheet) { MGst.styleSheet.cssText = style; } else { MGst.appendChild(this.FX.document.createTextNode(style)); }; } else { var MGst = container; MGst.className = 'LentaInformN7755'; if (MGst.styleSheet) { MGst.styleSheet.cssText = style; } else { while (MGst.firstChild) { MGst.removeChild(MGst.firstChild); } MGst.appendChild(this.FX.document.createTextNode(style)); }; } }; this.start = function() { if (this.root && self.WM == 0) { this.ZU(); } }; this.addEvent = function(elem, type, handler) { if (elem.addEventListener) { elem.addEventListener(type, handler, false) } else { elem.attachEvent('on' + type, handler) } }; this.getMainCssSelector = function() { return "#" + (this.realRoot ? this.realRoot.id : this.root.id); } }; var mgCanLoad7755 = false; var mgFallback7755 = false; if (document.getElementById("MG_ID")) mgCanLoad7755 = true; if (document.getElementById("LentaInform7755")) { mgCanLoad7755 = true; mgFallback7755 = true; } if (mgCanLoad7755) { if (!mgFallback7755) { var rootId7755 = document.getElementById("MG_ID").innerHTML; var div7755 = parent.window.document.createElement('div'); div7755.id = "LentaInform7755"; parent.window.document.getElementById("LentaInformScriptRootN" + rootId7755).appendChild(div7755); LentaInformInfN7755 = new LentaInformBaseBlockN7755("LentaInform7755", parent.window, false, rootId7755); } else { LentaInformInfN7755 = new LentaInformBaseBlockN7755("LentaInform7755", window, true, 0); } var self = this['LentaInformInfN7755']; this['LentaInformNMainBlock7755'] = function(self) { self.KZ = function(hash, event, element) { var href = self.clickTracking + self.webProtocol; var data = self.teaserData[hash]; if (data.link) { href += data.link; } else { if (data.type.toLowerCase() == 'news') { var id = self.id; if ('N' == 'C') { id = ''; } href += '//' + data.mirror + '/' + (self.isOurRedirector == '1' ? 'rnews' : 'pnews') + '/'; href += data[1] + '/i/' + id + '/pp/' + self.iteration + '/' + self.page + '/?h=' + encodeURIComponent(hash); } else { href += '//' + data.mirror + '/ghits/?h=' + encodeURIComponent(hash); } } if (typeof self.SH == 'function') { var afParams = self.SH(event, element); if (afParams) { var suffix = ''; href += ((href.indexOf('?') >= 0) ? '&' : '?') + 'k=' + suffix + 'f' + afParams; } } if (true == parseInt('0')) { var template = ''; template = template.replace(/^(\/\/)/, self.FX.location.protocol + '$1'); template = template.replace(/(%host%)/, self.FX.location.host); template = template.replace(/(%title%)/, self.BO(data[3])); href = template.replace(/(%rurl%)/, self.CD(href, true)); } return href; }; self.BO = function(str) { var a = { 'Ё':'YO','Й':'I','Ц':'TS','У':'U','К':'K','Е':'E','Н':'N','Г':'G','Ш':'SH','Щ':'SCH', 'З':'Z','Х':'H','Ъ':'','ё':'yo','й':'i','ц':'ts','у':'u','к':'k','е':'e','н':'n', 'г':'g','ш':'sh','щ':'sch','з':'z','х':'h','ъ':'\'','Ф':'F','Ы':'I','В':'V','А':'a', 'П':'P','Р':'R','О':'O','Л':'L','Д':'D','Ж':'ZH','Э':'E','ф':'f','ы':'i','в':'v','а':'a', 'п':'p','р':'r','о':'o','л':'l','д':'d','ж':'zh','э':'e','Я':'Ya','Ч':'CH','С':'S', 'М':'M','И':'I','Т':'T','Ь':'','Б':'B','Ю':'YU','я':'ya','ч':'ch','с':'s','м':'m', 'и':'i','т':'t','ь':'','б':'b','ю':'yu',' ':'_', 'і':'i', 'І':'I', 'ї':'i', 'Ї':'I' }; return str.split('').map(function (char) { if (char.match(/[a-z0-9_\-]/i)) { return char; } return a[char] || ''; }).join(''); }; self.getParentLink = function(el) { while (el.tagName !== 'BODY') { if (el.tagName == "A") { return el; } else { el = el.parentNode; } } return null; }; self.XO = function(data, type) { var t = {}; t.source = data[0]; t.id = data[1]; t.title = data[3]; t.desc = data[4]; if (type.toLowerCase() == 'news') { t.mirror = data[5] ? data[5] : self.ANs[self.IS]; t.hash = data[6]; t.other = data[7]; } else { t.mirror = self.ANs[self.IS]; t.key = data[6]; t.price = data[7].replace(".00", ""); t.priceold = data[8].replace(".00", ""); t.discount = t.priceold.replace(new RegExp('[^0-9.]'), '') == '' ? '' : Math.floor((1 * /\d+(?:\.\d+)?/.exec(t.priceold) - 1 * /\d+(?:\.\d+)?/.exec(t.price)) * 100 / /\d+(?:\.\d+)?/.exec(t.priceold)) + '%'; t.hash = data[9]; t.other = data[10]; var titleLower = t.title.toLowerCase(); var descLower = t.desc.toLowerCase(); var replicWords = ["копия", "подделка", "реплика", "как оригинал"]; var replicInsertWords = ["Копия. ", "Реплика. "]; if (data[5] == '1') { t.isReplic = true; for (var i = 0; i < replicWords.length; i++) { if (self.QL(titleLower).indexOf(replicWords[i]) > -1 || self.QG(descLower).indexOf(replicWords[i]) > -1) { t.isReplic = false; break; } } } else { t.isReplic = false; } } self.teaserData[t.hash] = data; self.teaserData[t.hash]['img'] = t.other["i"]; self.teaserData[t.hash]['type'] = type; self.teaserData[t.hash]['link'] = typeof(t.other['l']) != 'undefined' ? t.other['l'] : null; self.teaserData[t.hash]['mirror'] = t.mirror; return t; }; self.CD = function(s, replaceChars) { replaceChars = typeof replaceChars == 'undefined' ? replaceChars : false; var b64c = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='; var b64e = ''; var c1, c2, c3, e1, e2, e3, e4; var i = 0; while (i < s.length) { c1 = s.charCodeAt(i++); c2 = s.charCodeAt(i++); c3 = s.charCodeAt(i++); e1 = c1 >> 2; e2 = ((c1&3) << 4) | (c2 >> 4); e3 = isNaN(c2) ? 64 : (((c2&15) << 2) | (c3 >> 6)); e4 = isNaN(c3) ? 64 : (c3&63); b64e += b64c.charAt(e1) + b64c.charAt(e2) + b64c.charAt(e3) + b64c.charAt(e4); } if (true == replaceChars) { b64e = b64e.replace('+', '-').replace('/', '_').replace('=', '*'); } return b64e; }; }; this['LentaInformNMainBlock7755'].call(self, self); self.funcBlocks['Main'] = 'LentaInformNMainBlock7755'; LentaInformNCookieBlock7755 = function(self) { this.storageName = "LentaInformStorage" + (this.FX.LentaInformPageOffset ? this.FX.LentaInformPageOffset : ""); this.IU = function() { var matches = this.FX.document.cookie.match(new RegExp("(?:^|; )" + this.storageName + "=([^;]*)")); var res = {}; if (matches) { try { res = LentaInformJSON.parse(decodeURIComponent(matches[1])); } catch (e) {}; } return res; }; this.getCookie = function() { var value = this.IU(); if (value["N7755"]!=undefined) { this.BI = value["N7755"]; } else this.BI = {}; if (value["0"]!=undefined) { this.ZG = value["0"]; } else this.ZG = {}; }; this.setCookie = function() { var totalCookie = this.IU(); totalCookie["N7755"] = this.BI; totalCookie["0"] = this.ZG; var value = encodeURIComponent(LentaInformJSON.stringify(totalCookie)); this.FX.document.cookie = this.storageName+"="+value+";path=/"; }; }; this['LentaInformNCookieBlock7755'].call(self, self); self.funcBlocks['Cookie'] = 'LentaInformNCookieBlock7755'; LentaInformNSubnetsBlock7755 = function() { var self = this; self.funcBlocks["Subnets"] = "LentaInformNSubnetsBlock7755"; this.DV.push("XW"); this.IS = "3"; this.ANs = {}; this.ANsImages = {}; this.ANsAdvert = {}; this.ANsAdLinkBlocks = {}; this.ANsUtm = {}; this.subnetDashboardDomains = {}; this.ANs['0'] = 'marketgid.com'; this.ANsImages['0'] = 'marketgid.com'; this.ANsAdLinkBlocks['0'] = '<div class="mg_addad%id widgets_logo"><a href="http://usr.marketgid.com/demo/obmen-trafikom%utm%id" target="_blank"></a></div><style>.widgets_logo{position:relative}.widgets_logo a{background:url(//cdn.marketgid.com/images/widgets_marketgid.png) no-repeat;width:88px;height:10px;position:absolute;display:block;bottom:-10px;right:7px}.mgbox{margin-bottom:15px!important;}.widgets_logo:hover a{background:url(//cdn.marketgid.com/images/widgets_marketgid_hover.png) no-repeat}</style>'; this.ANsUtm['0'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['0'] = '//dashboard.marketgid.com'; this.ANs['1'] = 'ladycenter.ru'; this.ANsImages['1'] = 'marketgid.com'; this.ANsAdLinkBlocks['1'] = '<div class="mg_addad%id"><a href="http://ladycenter.ru/celevie-posetiteli.html%utm%id" class="mg_addad%id" target="_blank"><img src="//img.marketgid.com/images/search/2/icon-2.png"> Добавить объявление</a></div><style type="text/css">div.mg_addad%id{text-align: center;} div.mg_addad%id a{font:normal 11px Tahoma, Arial, sans-serif; color:#009966; text-decoration: none;} div.mg_addad%id img{margin-bottom: -1px;}</style>'; this.ANsUtm['1'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['1'] = '//dashboard.marketgid.com'; this.ANs['2'] = 'tovarro.com'; this.ANsImages['2'] = 'tovarro.com'; this.ANsAdLinkBlocks['2'] = '<div class="add mg_addad%id"><a href="http://tovarro.com/%utm%id" target="_blank">Добавить объявление</a></div><style>.add {text-align:center;} .add a {color:#989898;text-decoration:underline;font-family:Arial, Helvetica, sans-serif;font-size:11px;line-height: 36px;background:url(//cdn.tovarro.com/images/tovarro/add-advert.png) no-repeat right top;padding:5px 55px 10px 0;}</style>'; this.ANsUtm['2'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['2'] = '//dashboard.tovarro.com'; this.ANs['3'] = 'lentainform.com'; this.ANsImages['3'] = 'lentainform.com'; this.ANsAdLinkBlocks['3'] = '<div class="mg_addad%id"><a href="http://usr.marketgid.com/demo/celevie-posetiteli%utm%id" class="mg_addad%id" target="_blank"><img src="//img.marketgid.com/images/search/2/icon-2.png"> Добавить объявление</a></div><style type="text/css">div.mg_addad%id{text-align: center;} div.mg_addad%id a{font:normal 11px Tahoma, Arial, sans-serif; color:#009966; text-decoration: none;} div.mg_addad%id img{margin-bottom: -1px;}</style>'; this.ANsUtm['3'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['3'] = '//dashboard.lentainform.com'; this.ANs['4'] = 'marketgid.com'; this.ANsImages['4'] = 'marketgid.com'; this.ANsAdLinkBlocks['4'] = '<div class="mg_addad%id widgets_logo"><a href="http://usr.marketgid.com/demo/obmen-trafikom%utm%id" target="_blank"></a></div><style>.widgets_logo{position:relative}.widgets_logo a{background:url(//cdn.marketgid.com/images/widgets_marketgid.png) no-repeat;width:88px;height:10px;position:absolute;display:block;bottom:-10px;right:7px}.mgbox{margin-bottom:15px!important;}.widgets_logo:hover a{background:url(//cdn.marketgid.com/images/widgets_marketgid_hover.png) no-repeat}</style>'; this.ANsUtm['4'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['4'] = '//dashboard.marketgid.com'; this.DV.push("XW"); var informerData = [{"id": "7755", "etalonId": "0", "protocol": "5", "type": "News", "subnet": "3"}]; this.XW = function() { for (var i = 0; i < informerData.length; i++) { var tickerId = informerData[i].etalonId != "0" && informerData[i].protocol == "4" ? informerData[i].etalonId : informerData[i].id; if ((informerData[i].subnet !== '1') ^ ('0' === '1')) { (function(type) { self.FX["MarketGidLoad" + type + tickerId] = function(json) { self.HW = type.toLowerCase(); self.IS = '0'; self["LentaInformLoadNews"](json); }; })(informerData[i].type); } if ((informerData[i].subnet !== '1') ^ ('1' === '1')) { (function(type) { self.FX["MarketGidLoad" + type + tickerId] = function(json) { self.HW = type.toLowerCase(); self.IS = '1'; self["LentaInformLoadNews"](json); }; })(informerData[i].type); } if ((informerData[i].subnet !== '1') ^ ('2' === '1')) { (function(type) { self.FX["TovarroLoad" + type + tickerId] = function(json) { self.HW = type.toLowerCase(); self.IS = '2'; self["LentaInformLoadNews"](json); }; })(informerData[i].type); } if ((informerData[i].subnet !== '1') ^ ('3' === '1')) { (function(type) { self.FX["LentaInformLoad" + type + tickerId] = function(json) { self.HW = type.toLowerCase(); self.IS = '3'; self["LentaInformLoadNews"](json); }; })(informerData[i].type); } if ((informerData[i].subnet !== '1') ^ ('4' === '1')) { (function(type) { self.FX["MarketGidLoad" + type + tickerId] = function(json) { self.HW = type.toLowerCase(); self.IS = '4'; self["LentaInformLoadNews"](json); }; })(informerData[i].type); } } }; }; this['LentaInformNSubnetsBlock7755'].call(self, self); self.funcBlocks['Subnets'] = 'LentaInformNSubnetsBlock7755'; LentaInformNUtilsBlock7755 = function(self) { self.utils = {}; self.utils.getScroll = function() { return { top: self.FX.document.body.scrollTop || self.FX.document.documentElement.scrollTop || 0, left: self.FX.document.body.scrollLeft || self.FX.document.documentElement.scrollLeft || 0 } }; self.utils.getRect = function(element, withScroll) { var rect = element.getBoundingClientRect(); var toReturn = { top: rect.top, bottom: rect.bottom, left: rect.left, right: rect.right, height: (rect.height ? rect.height : rect.bottom - rect.top), width: (rect.width ? rect.width : rect.right - rect.left) }; if (withScroll) { var scroll = self.utils.getScroll(); toReturn.top += scroll.top; toReturn.bottom += scroll.top; toReturn.left += scroll.left; toReturn.right += scroll.left; } return toReturn; }; self.utils.getViewportSize = function() { return { width: (self.FX.innerWidth || self.FX.document.documentElement.clientWidth), height: (self.FX.innerHeight || self.FX.document.documentElement.clientHeight) }; } }; this['LentaInformNUtilsBlock7755'].call(self, self); self.funcBlocks['Utils'] = 'LentaInformNUtilsBlock7755'; LentaInformNMgqBlock7755 = function(self) { this.isLongCheck = false; this.DV.push("mgqInit"); this.mgqWorker = function() { var length = self.FX._mgq.length; var pool = self.FX._mgq.slice(0); for (var i = 0; i < length; i++) { var el = pool[i]; if (typeof(self.FX[el[0]]) == 'function') { self.FX[el[0]].apply(self.FX, el.slice(1)); self.FX._mgq.splice(i, 1); } } if (!self.FX._mgqi) { self.FX._mgqi = self.FX.setInterval(function() { self.mgqWorker(); }, 5); } if (!self.isLongCheck) { if ((new Date()).getTime() - self.FX._mgqt > 10000) { self.isLongCheck = true; self.FX.clearInterval(self.FX._mgqi); self.FX._mgqi = self.FX.setInterval(function() { self.mgqWorker(); }, 100); } } }; this.mgqInit = function() { self.FX._mgq = self.FX._mgq || []; if (typeof(self.FX._mgqp) == 'undefined') { self.FX._mgqp = self.mgqWorker; self.FX._mgqt = (new Date()).getTime(); self.mgqWorker(); } }; }; this['LentaInformNMgqBlock7755'].call(self, self); self.funcBlocks['Mgq'] = 'LentaInformNMgqBlock7755'; LentaInformNRtbBlock7755 = function(self) { this.BU.push("cmPixelLoad"); this.cmPixelLoad = function() { var script = LentaInformInfN7755.FX.document.createElement('script'); script.charset = 'utf-8'; script.src = '//cm.marketgid.com/i.js'; script.type = 'text/javascript'; script.async = true; var currentRoot = LentaInformInfN7755.realRoot != undefined ? LentaInformInfN7755.realRoot : LentaInformInfN7755.root; currentRoot.parentNode.appendChild(script); }; }; this['LentaInformNRtbBlock7755'].call(self, self); self.funcBlocks['Rtb'] = 'LentaInformNRtbBlock7755'; this['LentaInformNAntifraudBlock7755'] = function(self) { self.BU.push('AB'); self.DV.push('XE'); self.KJ = null; self.YU = null; self.YL = false; self.OC = ''; self.OR = ''; self.AD = ''; self.UJ = ''; self.OZ = ''; self.HQ = ''; self.CT = ''; self.MQ = ''; self.XE = function() { if (self.ZG['svspr'] == undefined) { self.AD = self.OY(self.FX.document.referrer, 500); self.ZG['svspr'] = self.AD; self.setCookie(); } else { self.AD = self.ZG['svspr']; } if (self.ZG['svsds'] != undefined) { self.UJ = self.ZG['svsds']; self.UJ++; } else { self.UJ = 1; } self.ZG['svsds'] = self.UJ; self.setCookie(); var d = new Date(); self.OC = d.getTime() + '7755' + Math.floor(Math.random()*100) + '' + (2*Math.floor(Math.random()*4)); self.OC += 1; self.MQ = d.getTime(); if (self.ZG['TejndEEDj'] == undefined) { self.ZG['TejndEEDj'] = self.x64String(self.OC); self.setCookie(); } }; self.x64String = function(s) { s = s.toString(); s = unescape(encodeURIComponent(s)); var b64c = '\x41\x42\x43\x44\x45\x46\x47\x48\x49\x4a\x4b\x4c\x4d\x4e\x4f\x50\x51\x52\x24\x54\x55\x56\x57\x58\x59\x5a\x61\x62\x63\x64\x65\x2a\x67\x68\x69\x6a\x6b\x6c\x6d\x6e\x6f\x70\x71\x72\x73\x74\x75\x76\x77\x78\x79\x7a\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x2b\x2f\x3d'; var b64e = ''; var c1, c2, c3, c4, e1, e2, e3, e4; for (var i = 0; i < s.length;) { c1 = s.charCodeAt(i++); c2 = 2 << 5; e1 = c1 >> (c2 / 32); c3 = s.charCodeAt(i++); e2 = ((c1 & 3) << (c2 / 16)) | (c3 >> (c2 / 16)); c4 = s.charCodeAt(i++); e3 = isNaN(c3) ? c2 : (((c3 & 15) << (c2 / 32)) | (c4 >> (c2 - 58))); e4 = isNaN(c4) ? c2 : (c4 & (c2 - 1)); b64e += b64c.charAt(e1) + b64c.charAt(e2) + b64c.charAt(e3) + b64c.charAt(e4); } return b64e; }; self.PE = function(n) { return n ? Math.round(n).toString(16) : ''; }; self.OY = function(str, n) { return str.length > n ? str.substring(0, n) : str; }; self.getCoordsElementOfPage = function(element) { var offsetLeft = 0, offsetTop = 0; do { offsetLeft += element.offsetLeft; offsetTop += element.offsetTop; } while (element = element.offsetParent); return { 'x': offsetLeft, 'y': offsetTop }; }; self.getCoordsClickOfPage = function(event) { var x = 0, y = 0; if (!event) event = self.FX.event; if (event.pageX || event.pageY) { x = event.pageX; y = event.pageY; } else if (event.clientX || event.clientY) { x = event.clientX + (self.FX.document.documentElement.scrollLeft || self.FX.document.body.scrollLeft) - self.FX.document.documentElement.clientLeft; y = event.clientY + (self.FX.document.documentElement.scrollTop || self.FX.document.body.scrollTop) - self.FX.document.documentElement.clientTop; } return { 'x':x, 'y':y }; }; self.UA = function() { var BP = 0; if (self.FX.opera) { BP += 1; } if (self.FX.opera && self.FX.opera.buildNumber) { BP += 2; } if (self.FX.document.all || self.FX.MSStream) { BP += 4; } if (!self.FX.btoa || self.FX.navigator.msPointerEnabled) { BP += 8; } if (self.FX.chrome) { BP += 16; } if (self.FX.mozInnerScreenX != undefined) { BP += 32; } if (!self.FX.external) { BP += 64; } return BP; }; self.JK = function() { return window.navigator.javaEnabled() }; self.SG = function() { var flashEnabled = false; if (typeof(navigator.plugins) != 'undefined' && typeof(navigator.plugins["Shockwave Flash"]) == 'object') { flashEnabled = true; } else if (typeof window.ActiveXObject != 'undefined') { try { if (new ActiveXObject('ShockwaveFlash.ShockwaveFlash')) { flashEnabled = true; } } catch(e) {} } return flashEnabled; }; self.SH = function(event, element) { if (false == self.YL) { return; } var element = element || self.FX.document.createElement('A'); var event = event || self.FX.document.createEvent('MouseEvent'); var date = new Date(); var coordClickOfPage = self.getCoordsClickOfPage(event); var b = element.getBoundingClientRect(); var RV = self.getCoordsElementOfPage(element); var d = self.FX.document; var BP = self.UA(); var DL = ''; for (var i = 1; i <= Math.ceil((BP + 1) / 68) * 31; i++) { if ((i % 26 == 0) || ((i % 26 == 6) && (((i % 26) + 5) % 11 == 0))) { continue; } DL += (i == 1 ? '' : String.fromCharCode(102)) + String.fromCharCode(96 + (i % 26)) + String.fromCharCode(83); var ZE = ''; if (i > 31) { break; } switch (i) { case 1: ZE = self.OC; break; case 2: ZE = self.PE(b.bottom); break; case 3: ZE = self.PE(self.MQ); break; case 4: ZE = self.PE(date.getTime()); break; case 5: ZE = self.PE(d.body.clientheight); break; case 7: ZE = self.PE(event.clientX); break; case 8: ZE = self.PE(event.clientY); break; case 9: ZE = self.PE(b.left); break; case 10: ZE = self.PE(self.YU); break; case 11: ZE = self.PE(b.top); break; case 12: ZE = self.PE(d.body.clientheight - event.clientY); break; case 13: ZE = self.PE(b.right - b.left); break; case 14: ZE = self.PE(b.bottom - b.top); break; case 15: ZE = self.CT; break; case 16: ZE = self.PE(event.clientY); break; case 17: ZE = self.PE(BP); break; case 18: ZE = self.PE(element['\x64\x61\x74\x61\x2d\x72\x65\x6C']); break; case 19: ZE = self.OY(d.location.href, 500); break; case 20: ZE = self.OY(d.referrer, 500); break; case 21: ZE = self.AD; break; case 22: ZE = self.PE(self.UJ); break; case 23: ZE = self.PE(coordClickOfPage.x); break; case 24: ZE = self.PE(coordClickOfPage.y); break; case 25: ZE = self.PE(RV.x); break; case 27: ZE = self.PE(RV.y); break; case 28: ZE = self.PE(self.JK()); break; case 29: ZE = self.PE(self.SG()); break; case 30: ZE = self.PE(window.screen.width); break; case 31: ZE = self.PE(window.screen.height); break; } DL += self.x64String(ZE); } return encodeURIComponent(DL); }; self.MT = function(event, element) { if (!event) var event = self.FX.event; if (!event.target) { event.target = event.srcElement; } var hash = element['data-hash'] || element.getAttribute('data-hash'); if (typeof(hash) == 'undefined' || element.tagName != 'A') { return; } element.href = self.KZ(hash, event, element); }; self.SK = function(event) { if (!event) var event = self.FX.event; if (!event.target) { event.target = event.srcElement; } self.YL = true; var element = event.target; if (element.tagName != 'A') { var element = self.getParentLink(element); if (null == element) { return; } } self.MT(event, element); self.FX.setTimeout(function() { self.YL = false; self.MT(event, element); }, 100); }; self.CQ = function(event) { if (!event) var event = self.FX.event; if (!event.target) { event.target = event.srcElement; } self.YL = true; var element = event.target; if (element.tagName != 'A') { var element = self.getParentLink(element); if (null == element) { return; } } var v = 0; if (parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C'])) { v = parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C']); } if (v % 2 != 1) { element['\x64\x61\x74\x61\x2d\x72\x65\x6C'] = v + 1; } self.MT(event, element); }; self.ZZ = function(event) { if (!event) var event = self.FX.event; if (!event.target) { event.target = event.srcElement; } self.YU = 0; self.FX.clearInterval(self.KJ); self.KJ = self.FX.setInterval(function() { self.YU++; }, 1000); }; self.QE = function(event) { if (!event) var event = self.FX.event; if (!event.target) { event.target = event.srcElement; } self.YL = true; var element = event.target; if (element.tagName != 'A') { var element = self.getParentLink(element); if (null == element) { return; } } var v = 0; if (parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C'])) { v = parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C']); } if ((v >> 1) % 2 != 1) { element['\x64\x61\x74\x61\x2d\x72\x65\x6C'] = v + 2; } self.MT(event, element); }; self.AB = function() { self.addEvent(self.root, "mouseup", self.SK); self.addEvent(self.root, "mouseover", self.CQ); self.addEvent(self.root, "mousemove", self.QE); self.addEvent(self.FX.document, "scroll", self.ZZ); }; }; this['LentaInformNAntifraudBlock7755'].call(self, self); self.funcBlocks['Antifraud'] = 'LentaInformNAntifraudBlock7755'; LentaInformNCountersBlock7755 = function(self) { this.DV.push("GK"); this.GK = function() { if(!this.FX['autoCounter'] && this.FX.self === this.FX.top) { this.FX['autoCounter'] = true; this.FX['autoCounter'] = self.FX.document.createElement("IMG"); this.FX['autoCounter'].src = '//autocounter.lentainform.com/autocreative/counter.php?id=260469&pid=35602&referer='+this.FX.document.referrer.replace(/&/g, '%26'); } if(!this.FX.MGCnt){ var MGDCnt = new Date(); var script = this.FX.document.createElement('script'); script.type = 'text/javascript'; script.src = "//counter.marketgid.com/js/mui.js?cbuster="+MGDCnt.getYear()+MGDCnt.getMonth()+MGDCnt.getDay()+MGDCnt.getHours(); script.charset = "utf-8"; this.root.parentNode.appendChild(script); self.FX.document.createElement("IMG").src = "//counter.yadro.ru/hit;Mgidohvat?r"+escape(this.FX.document.referrer)+((typeof(screen)=="undefined")?"":";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?screen.colorDepth:screen.pixelDepth))+";u"+escape(this.FX.document.URL)+";"+Math.random(); } }; this.BU.push("liveCountersLoad"); this.liveCountersLoad = function() { var counterName = 'MGCnt' + 'ni'; if (!this.FX[counterName]) { this.FX[counterName] = self.FX.document.createElement("IMG"); this.FX[counterName].src = "//counter.yadro.ru/hit;Mgidohvat/" + 'ni' + "?r"+escape(this.FX.document.referrer)+((typeof(screen)=="undefined")?"":";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?screen.colorDepth:screen.pixelDepth))+";u"+escape(this.FX.document.URL)+";"+Math.random(); } } }; this['LentaInformNCountersBlock7755'].call(self, self); self.funcBlocks['Counters'] = 'LentaInformNCountersBlock7755'; this['LentaInformNAdvertLinkBlock7755'] = function(self) { self.PI.push("refreshAdvertLink"); self.refreshAdvertLink = function() { if (parseInt('0')) { try { var adLinkBlock = self.ANsAdLinkBlocks[self.IS].replace(/%id/g, '7755'); adLinkBlock = adLinkBlock.replace( "%WIDGET_TITLE%", self.FX['MGWidgetTitle7755'] ? self.FX['MGWidgetTitle7755'] : "" ); var utm = ''; if (utm == '') { utm = self.ANsUtm[self.IS]; } self.IR = adLinkBlock.replace(/%utm/, utm); } catch (e) { } } else { self.IR = ''; } }; self.parseAdvertLink = function(template) { var marker = '<!--advertPrefix-->'; var isMarkerInTheSecondPart = template.indexOf(marker) > (template.length / 2); if (isMarkerInTheSecondPart) { self.fixGetElementsByClassNameHandler(self.root); var elements = self.root.getElementsByClassName('mg_addad7755'); for (var i = 0; i < elements.length; i++) { elements[i].parentNode.removeChild(elements[i]); } } if (isMarkerInTheSecondPart || self.WM == 0) { if (template.indexOf(marker) >= 0) { template = template.replace(marker, this.IR); } else { template = self.IR + template; } } return template; }; }; this['LentaInformNAdvertLinkBlock7755'].call(self, self); self.funcBlocks['AdvertLink'] = 'LentaInformNAdvertLinkBlock7755'; this['LentaInformNRejectBlock7755'] = function(self) { self.isInsertedRejectStyles = false; self.initReject = function () { self.FX['LentaInformNReject123487'] = function() { var subnet = '3'; var url = self.subnetDashboardDomains[parseInt(subnet)]; if ('N' == 'C') { url += '/publishers/blocked'; } else { url += '/audience-development/blocked'; } var widget = '123487'; var mglines = self.root.querySelectorAll('.mgline'); for (var i = 0; i < mglines.length; i++) { (function(mgline) { if (mgline.className.split(' ').indexOf('dsp') >= 0) { return; } var img = mgline.querySelector('img.mcimg'); var el = img.parentNode.querySelectorAll('.close-informer'); var match = mgline.className.match(/teaser-([0-9]+)/); if (null == match) { return; } if (el.length == 0) { var a = self.FX.document.createElement('a'); a.className = "close-informer"; a.href = url + '/teaser/' + match[1] + '/widget/' + widget + '/type/' + self.blockType; a.target = '_blank'; a.rel = "nofollow"; img.parentNode.insertBefore(a, img); } })(mglines[i]); } }; }; self.initRejectStyles = function() { if (self.isInsertedRejectStyles) { return; } var rejectStyles = '\ div.mcimg a.close-informer {\ width: 30px;\ height: 30px;\ background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNpiZICCV1p6UUAqH4gNgZiVgbrgNxCfB+KJYtcuLQMJMEItnQqkshjoA6YBLc9mhPp0KQN9QTQTNHjpDfKZoHFKb2DIRIOERAxgZWIYIDBq8ajFNAMsuCREr16kigWvtfVHg3o0cRGXKEaDetTiUYsHpcW/B8De30zQFj69wXmQxRMHwOKJTNC+zDQ6WgrqwixjHKhOG0CAAQBgjyYSHiWbYQAAAABJRU5ErkJggg==");\ display: block;\ opacity: 0;\ position: absolute;\ left: 3px;\ top: 3px;\ z-index: 1;\ cursor: pointer;\ }\ div.mgline:hover a.close-informer {\ opacity: 0.4;\ -moz-transition: all 0.3s ease-out;\ -o-transition: all 0.3s ease-out;\ -webkit-transition: all 0.3s ease-out;\ -ms-transition: all 0.3s ease-out;\ transition: all 0.3s ease-out;\ }\ div.mgline a.close-informer:hover {\ opacity: 1;\ -moz-transition: all 0.3s ease-out;\ -o-transition: all 0.3s ease-out;\ -webkit-transition: all 0.3s ease-out;\ -ms-transition: all 0.3s ease-out;\ transition: all 0.3s ease-out;\ }\ div.mcimg[max-width~="139px"] a.close-informer {\ width: 16px!important;\ height: 16px!important;\ background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFRJREFUeNpifKWlJ8PAwLAYiB0YSAMHgDiWiUzNDFA9i5nI1Aw3hImBQjDwBrAgc0SvXiRK02tt/cHqBWSnDZ1YGBwGHKBA/wGQAbFkGgLOzgABBgAwhw3HGxZizAAAAABJRU5ErkJggg==") !important;\ }\ div.mcimg {\ position: relative;\ }\ div.image-with-price {\ position: relative;\ }\ .mgline .image-container {\ width: auto;\ margin: 0 auto;\ display: table;\ position: relative;\ }'; if ('N' == 'C') { self.stylesNews += rejectStyles; self.stylesGoods += rejectStyles; } else { self.styles += rejectStyles; } self.isInsertedRejectStyles = true; }; self.PI.push('initRejectStyles'); self.BU.push('initReject'); }; this['LentaInformNRejectBlock7755'].call(self, self); self.funcBlocks['Reject'] = 'LentaInformNRejectBlock7755'; LentaInformNMonitorBlock7755 = function(self) { this.BU.push("monitorInit"); this.shownBlocks = {}; this.monitorInterval = null; this.isFirstCappingRequest = true; this.monitorInit = function() { var regex = /\/\/img.*\/[\d]+\/([\d]+).*\.(jpg|gif)/; if (!this.monitorInterval) { this.monitorInterval = self.FX.setInterval(function() { var newBlocks = {}; var viewportSize = self.utils.getViewportSize(); var images = self.root.getElementsByTagName('IMG'); for (var i = 0; i < images.length; i++) { if (self.isElementInViewport(images[i])) { var res = regex.exec(images[i].src); if (res && res[1] && !self.shownBlocks[res[1]]) { var teaserBlock = self.getParentTeaserBlock(images[i]); if (teaserBlock) { var teaserDims = self.utils.getRect(teaserBlock, true); newBlocks[res[1]] = { width: Math.round(teaserDims.width), height: Math.round(teaserDims.height), atf: teaserDims.top < viewportSize.height, align: self.getTeaserAlign(teaserDims), desc: self.isTeaserElementVisible(teaserBlock, 'mcdesc'), price: self.isTeaserElementVisible(teaserBlock, 'mcprice'), domain: self.isTeaserElementVisible(teaserBlock, 'mcdomain') }; } else { newBlocks[res[1]] = { width: "-", height: "-", desc: false, price: false, domain: false }; } self.shownBlocks[res[1]] = 1; } } } self.prepareCappingData(newBlocks); }, 1000); } }; this.prepareCappingData = function(blocks) { var typePrefix = "&t=" + "N"; var data = ""; var counter = 0; for (var i in blocks) { var prefix = blocks[i].width + "|" + blocks[i].height + "|" + ( (blocks[i].desc ? 1 : 0) + (blocks[i].price ? 2 : 0) + (blocks[i].domain ? 4 : 0) + (blocks[i].atf ? 8 : 0) + (blocks[i].align == 'right' ? 16 : 0) + (blocks[i].align == 'left' ? 32 : 0)) + "|"; data += "&v=" + prefix + self.teaserHashes[i]; counter++; if (counter > 20) { self.sendCappingData(typePrefix + data); data = ""; counter = 0; } } if (data != "") { self.sendCappingData(typePrefix + data); } }; this.sendCappingData = function(data) { var img = document.createElement('IMG'); if (self.isFirstCappingRequest) { data = "&f=1" + data; self.isFirstCappingRequest = false; } img.src = "//c." + (self.IS == 3 ? "lentainform.com" : "marketgid.com") + "/c?pv=2" + data; }; this.isElementInViewport = function(el) { var rect = el.getBoundingClientRect(); var viewport = self.utils.getViewportSize(); return ( rect.bottom - rect.top > 0 && rect.right - rect.left > 0 && rect.top >= 0 && rect.left >= 0 && rect.bottom <= viewport.height && rect.right <= viewport.width ); }; this.getParentTeaserBlock = function(el) { var current = el; while (current != self.root && current != self.FX) { if (current.className.indexOf("mgline") >= 0) { return current; } else { current = current.parentNode; } } return null; }; this.isTeaserElementVisible = function(el, className) { self.fixGetElementsByClassNameHandler(el); var elements = el.getElementsByClassName(className); if (elements.length > 0) { var dims = elements[0].getBoundingClientRect(); if (dims.right - dims == 0 || dims.bottom - dims.top == 0) { return false; } else { return true; } } else { return false; } }; this.getTeaserAlign = function(teaserDims) { var bodyWidth = self.FX.document.body.scrollWidth; if (teaserDims.right < 0.3 * bodyWidth) { return 'left'; } else if (teaserDims.left >= 0.7 * bodyWidth) { return 'right' } else { return 'center'; } }; }; this['LentaInformNMonitorBlock7755'].call(self, self); self.funcBlocks['Monitor'] = 'LentaInformNMonitorBlock7755'; LentaInformInfN7755.init(); LentaInformInfN7755.start(); } 